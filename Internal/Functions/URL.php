<?php
//--------------------------------------------------------------------------------------------------
// URL
//--------------------------------------------------------------------------------------------------
//
// Author     : Ozan UYKUN <ozanbote@windowslive.com> | <ozanbote@gmail.com>
// Site       : www.znframework.com
// License    : The MIT License
// Copyright  : Copyright (c) 2012-2016, ZN Framework
//
//--------------------------------------------------------------------------------------------------

//--------------------------------------------------------------------------------------------------
// currentUrl()
//--------------------------------------------------------------------------------------------------
//
// @param string $fix
//
// @return string
//
//--------------------------------------------------------------------------------------------------
function currentUrl(String $fix = NULL) : String
{
    $currentUrl = hostUrl(server('requestUri'));

    if( ! empty($fix) )
    {
        return suffix(rtrim($currentUrl, $fix)) . $fix;
    }

    return $currentUrl;
}

//--------------------------------------------------------------------------------------------------
// siteUrl()
//--------------------------------------------------------------------------------------------------
//
// @param string $uri
// @param int    $index
//
// @return string
//
//--------------------------------------------------------------------------------------------------
function siteUrl(String $uri = NULL, Int $index = 0) : String
{
    return hostUrl
    (
           internalBaseDir($index).
           indexStatus().
           internalGetCurrentProject().
           suffix(currentLang()).
           $uri
     );
}

//--------------------------------------------------------------------------------------------------
// siteUrls() - v.4.2.6
//--------------------------------------------------------------------------------------------------
//
// @param string $uri
// @param int    $index
//
// @return string
//
//--------------------------------------------------------------------------------------------------
function siteUrls(String $uri = NULL, Int $index = 0) : String
{
    return str_replace(sslStatus(), httpFix(true), siteUrl($uri, $index));
}

//--------------------------------------------------------------------------------------------------
// baseUrl()
//--------------------------------------------------------------------------------------------------
//
// @param string $uri
// @param int    $index
//
// @return string
//
//--------------------------------------------------------------------------------------------------
function baseUrl(String $uri = NULL, Int $index = 0) : String
{
    return hostUrl(internalBaseDir($index) . absoluteRelativePath($uri));
}

//--------------------------------------------------------------------------------------------------
// prevUrl()
//--------------------------------------------------------------------------------------------------
//
// @param void
//
// @return string
//
//--------------------------------------------------------------------------------------------------
function prevUrl() : String
{
    return  $_SERVER['HTTP_REFERER'] ?? '';
}

//--------------------------------------------------------------------------------------------------
// hostUrl()
//--------------------------------------------------------------------------------------------------
//
// @param string $uri
//
// @return string
//
//--------------------------------------------------------------------------------------------------
function hostUrl(String $uri = NULL) : String
{
    return sslStatus() . host() . ($uri === '' ? '/' : prefix(internalCleanInjection($uri)));
}
